# æ•°æ®å­˜å‚¨åŠŸèƒ½è¯´æ˜

## âœ… åŠŸèƒ½å®ç°

ç”¨æˆ·åå•å’Œç¼“å­˜æ–‡ä»¶ç°åœ¨å­˜å‚¨åœ¨**å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨ç›®å½•**ï¼Œè€Œéç”¨æˆ·ä¸»ç›®å½•ã€‚

## ğŸ“ å­˜å‚¨ä½ç½®

### å¼€å‘æ¨¡å¼

```
F:\Projets\CONTER\data\data.json
```

### æ‰“åŒ…å

```
å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•\data\data.json
```

ä¾‹å¦‚ï¼š

- å¦‚æœåº”ç”¨åœ¨ï¼š`C:\Apps\CONTER\CONTER.exe`
- æ•°æ®æ–‡ä»¶åœ¨ï¼š`C:\Apps\CONTER\data\data.json`

## ğŸ¯ ä¼˜åŠ¿

| ç‰¹æ€§              | è¯´æ˜                             |
| ----------------- | -------------------------------- |
| âœ… **ä¾¿æºæ€§**     | åº”ç”¨å’Œæ•°æ®åœ¨åŒä¸€ç›®å½•ï¼Œå¯æ•´ä½“ç§»åŠ¨ |
| âœ… **å¯è§æ€§**     | ç”¨æˆ·å¯ç›´æ¥æŸ¥çœ‹å’Œå¤‡ä»½æ•°æ®æ–‡ä»¶     |
| âœ… **å¤šå®ä¾‹**     | æ”¯æŒè¿è¡Œå¤šä¸ªç‹¬ç«‹çš„åº”ç”¨å‰¯æœ¬       |
| âœ… **æ— æƒé™é—®é¢˜** | ä¸éœ€è¦è®¿é—®ç³»ç»Ÿç›®å½•æˆ–ç”¨æˆ·ä¸»ç›®å½•   |
| âœ… **æ˜“äºå¤‡ä»½**   | å¤åˆ¶æ•´ä¸ªåº”ç”¨ç›®å½•å³å¯å®Œæ•´å¤‡ä»½     |

## ğŸ“ è‡ªåŠ¨åˆ›å»º

- âœ… é¦–æ¬¡è¿è¡Œè‡ªåŠ¨åˆ›å»º `data` ç›®å½•
- âœ… è‡ªåŠ¨åˆ›å»ºç©ºçš„ `data.json` æ–‡ä»¶
- âœ… æ— éœ€æ‰‹åŠ¨é…ç½®

## ğŸ’¾ æ•°æ®æ–‡ä»¶æ ¼å¼

```json
{
  "students": [
    {
      "name": "å¼ ä¸‰",
      "id": "001",
      "weight": 1.0,
      "picked_count": 5,
      "last_picked": "2025-10-21T14:30:00"
    }
  ],
  "records": [
    {
      "student_name": "å¼ ä¸‰",
      "timestamp": "2025-10-21T14:30:00",
      "rule_type": "Random Pick"
    }
  ]
}
```

## ğŸ”„ æ•°æ®ç®¡ç†

### å¤‡ä»½æ•°æ®

å¤åˆ¶ `data` ç›®å½•ï¼š

```bash
cp -r data data_backup
```

### æ¢å¤æ•°æ®

æ›¿æ¢ `data.json` æ–‡ä»¶ï¼š

```bash
cp data_backup/data.json data/data.json
```

### è¿ç§»åº”ç”¨

ç›´æ¥å¤åˆ¶æ•´ä¸ªåº”ç”¨ç›®å½•åˆ°æ–°ä½ç½®ã€‚

### é‡ç½®æ•°æ®

åˆ é™¤ `data/data.json`ï¼Œåº”ç”¨ä¼šè‡ªåŠ¨åˆ›å»ºç©ºæ–‡ä»¶ã€‚

## ğŸ”§ æŠ€æœ¯å®ç°

### utils.py

```python
def get_app_data_dir() -> str:
    """è·å–æ•°æ®å­˜å‚¨ç›®å½•"""
    if getattr(sys, 'frozen', False):
        # æ‰“åŒ…åï¼šå¯æ‰§è¡Œæ–‡ä»¶ç›®å½•
        app_dir = os.path.dirname(sys.executable)
    else:
        # å¼€å‘æ¨¡å¼ï¼šè„šæœ¬ç›®å½•
        app_dir = os.path.dirname(os.path.abspath(__file__))

    data_dir = os.path.join(app_dir, 'data')
    if not os.path.exists(data_dir):
        os.makedirs(data_dir)

    return data_dir
```

### models.py

```python
class DataManager:
    def __init__(self, data_file: str = 'data.json'):
        self.data_file = data_file
        self.students = []
        self.records = []
        self.load_data()
        # è‡ªåŠ¨åˆ›å»ºç©ºæ–‡ä»¶
        if not os.path.exists(self.data_file):
            self.save_data()
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- è¯¦ç»†è¯´æ˜ï¼š[DATA_STORAGE.md](DATA_STORAGE.md)
- å¼€å‘æŒ‡å—ï¼š[DEVELOPMENT.md](DEVELOPMENT.md)
- ç”¨æˆ·æ‰‹å†Œï¼š[USER_GUIDE.md](USER_GUIDE.md)

## âœ¨ ä½¿ç”¨ç¤ºä¾‹

### è¿è¡Œåº”ç”¨

```bash
# å¼€å‘æ¨¡å¼
python main.py
# æ•°æ®æ–‡ä»¶ï¼šé¡¹ç›®ç›®å½•/data/data.json

# æ‰“åŒ…å
.\CONTER.exe
# æ•°æ®æ–‡ä»¶ï¼šå¯æ‰§è¡Œæ–‡ä»¶ç›®å½•/data/data.json
```

### æŸ¥çœ‹æ•°æ®

```bash
# Windows
type data\data.json

# Linux/macOS
cat data/data.json
```

### ç¼–ç¨‹è®¿é—®

```python
from utils import get_app_data_dir
import os

data_dir = get_app_data_dir()
data_file = os.path.join(data_dir, 'data.json')
print(f"æ•°æ®æ–‡ä»¶ä½ç½®: {data_file}")
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æƒé™**ï¼šç¡®ä¿åº”ç”¨ç›®å½•æœ‰å†™å…¥æƒé™
2. **å¤‡ä»½**ï¼šå®šæœŸå¤‡ä»½ `data` ç›®å½•
3. **æ‰‹åŠ¨ç¼–è¾‘**ï¼šä¸å»ºè®®åœ¨åº”ç”¨è¿è¡Œæ—¶æ‰‹åŠ¨ç¼–è¾‘æ•°æ®æ–‡ä»¶
4. **äº‘åŒæ­¥**ï¼šå¯å°†åº”ç”¨æ”¾åœ¨äº‘ç›˜ç›®å½•å®ç°å¤šè®¾å¤‡åŒæ­¥

## ğŸ†š ä¸æ—§ç‰ˆæœ¬å¯¹æ¯”

| é¡¹ç›®     | æ—§ç‰ˆæœ¬       | æ–°ç‰ˆæœ¬           |
| -------- | ------------ | ---------------- |
| å­˜å‚¨ä½ç½® | `~/.conter/` | `åº”ç”¨ç›®å½•/data/` |
| å¯è§æ€§   | éšè—ç›®å½•     | æ˜ç¡®å­ç›®å½•       |
| ä¾¿æºæ€§   | âŒ åˆ†ç¦»      | âœ… é›†æˆ          |
| å¤‡ä»½     | éœ€å•ç‹¬å¤‡ä»½   | æ•´ä½“å¤‡ä»½         |
| å¤šå®ä¾‹   | âŒ å…±äº«æ•°æ®  | âœ… ç‹¬ç«‹æ•°æ®      |

---

**åŠŸèƒ½å·²å®Œæˆï¼** ğŸ‰

ç°åœ¨ç”¨æˆ·åå•å’Œç¼“å­˜éƒ½å­˜å‚¨åœ¨å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•çš„ `data` å­ç›®å½•ä¸­ã€‚
